# ==============================================
# OpenClash / Clash Meta (Mihomo) é…ç½®æ–‡ä»¶æ¨¡æ¿
# åŠŸèƒ½ï¼šè‡ªåŠ¨åœ°åŒºåˆ†ç»„ã€è‡ªåŠ¨æµ‹é€Ÿé€‰æ‹©ã€GeoSite/GeoIP è§„åˆ™
# ==============================================

# --- åŸºç¡€è®¾ç½® ---
port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
ipv6: false
external-controller: 127.0.0.1:9090

# --- Meta ä¸“å±è®¾ç½® (Mihomo) ---
# å¼€å¯åŸŸåå—…æ¢ï¼Œè§£å†³éƒ¨åˆ†åº”ç”¨éåŸŸåè¿æ¥çš„åˆ†æµé—®é¢˜
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true

# GeoX æ•°æ®åº“è‡ªåŠ¨æ›´æ–°è®¾ç½®
geodata-mode: true
geodata-loader: standard

proxy-providers:
  # å‘½åä¸º 'Subscribe'ï¼Œåç»­åˆ†ç»„å°†ä»è¿™é‡Œæå–èŠ‚ç‚¹
  Subscribe:
    type: http
    url: "https://f17927a4db501af1b83f73c861d74fc5.cdn-res-oss-cn-hongkong-aliyuncs-file.com/s?t=f17927a4db501af1b83f73c861d74fc5.jpg&flag=clash&route=1"
    interval: 86400
    path: ./proxies/subscribe.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨
      - ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨
      - ğŸ³ï¸â€ğŸŒˆ å…¨éƒ¨èŠ‚ç‚¹
      - DIRECT

  # 2. â™»ï¸ è‡ªåŠ¨é€‰æ‹© (æ ¹æ®è§„åˆ™è‡ªåŠ¨åˆ¤æ–­)
  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - Subscribe

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - Subscribe
    filter: "(?i)æ¸¯|HK|Hong"

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - Subscribe
    filter: "(?i)æ—¥|JP|Japan"

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - Subscribe
    filter: "(?i)ç¾|US|United States"

  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - Subscribe
    filter: "(?i)æ–°|SG|Singapore"

  - name: ğŸ³ï¸â€ğŸŒˆ å…¨éƒ¨èŠ‚ç‚¹
    type: select
    use:
      - Subscribe

  - name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨

  - name: ğŸ¤– OpenAI
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©

# ä¼˜å…ˆçº§ï¼šä»ä¸Šåˆ°ä¸‹åŒ¹é…ï¼ŒåŒ¹é…ä¸­å³åœæ­¢
rules:
  # 1. å¹¿å‘Šæ‹¦æˆª (åŸºäº geosite:category-ads-all)
  - GEOSITE,category-ads-all,REJECT

  # 2. ç›´è¿å›½å†…å¸¸è§åŸŸå (åŸºäº geosite:cn)
  - GEOSITE,cn,DIRECT

  # 3. å¸¸è§ä¸å¯ç›´è¿åº”ç”¨å¤„ç†
  - GEOSITE,telegram,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - GEOSITE,openai,ğŸ¤– OpenAI
  - GEOSITE,youtube,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,netflix,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,disney,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  
  # 4. å±€åŸŸç½‘å’Œç§æœ‰åœ°å€ç›´è¿
  - GEOSITE,private,DIRECT
  - GEOIP,private,DIRECT,no-resolve

  # 5. è…¾è®¯/é˜¿é‡Œç³»ç‰¹å®šå¤„ç† (é˜²æ­¢è¯¯æ€)
  - GEOIP,telegram,ğŸ“² ç”µæŠ¥æ¶ˆæ¯

  # 6. ä¸­å›½å¤§é™† IP ç›´è¿ (åŸºäº GeoIP æ•°æ®åº“)
  - GEOIP,cn,DIRECT

  # 7. å…œåº•è§„åˆ™ï¼šå‰©ä¸‹çš„å…¨éƒ¨èµ°ä»£ç†
  # å¦‚æœæ˜¯éä¸­å›½ IPï¼Œä¸”ä¸Šé¢æ²¡åŒ¹é…åˆ°ï¼Œèµ°èŠ‚ç‚¹é€‰æ‹©
  - MATCH,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
